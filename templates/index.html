<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FleetDest</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>Fleet Destination Manager</h1>
        {% if logged_in %}
            <h2>Welcome, {{ character_name }}</h2>
            <p>Enter a destination system below to send it to your fleet:</p>
            <form class="waypoint-form">
                <input id="system-input" type="text" placeholder="Enter Solar System" autocomplete="off">
                <div id="autocomplete-list"></div>
                <button type="button" id="send-destination">Send Destination</button>
            </form>
            <p><a href="{{ url_for('logout') }}">Log Out</a></p>
        {% else %}
            <p>Please log in to manage your fleet destinations:</p>
            <a href="{{ url_for('login') }}" class="button">Log In with EVE Online</a>
        {% endif %}
    </div>
    <div class="footer">
        <small>Envisioned by Jonny Guns - Created by ChatGPT</small>
    </div>
    <script>
        // Autocomplete functionality
        document.getElementById("system-input").addEventListener("input", function () {
            const query = this.value;
            const autocompleteList = document.getElementById("autocomplete-list");
            autocompleteList.innerHTML = "";
            if (!query) return;

            fetch(`/search/${query}`)
                .then(response => response.json())
                .then(results => {
                    results.forEach(result => {
                        const div = document.createElement("div");
                        div.textContent = result;
                        div.addEventListener("click", function () {
                            document.getElementById("system-input").value = result;
                            autocompleteList.innerHTML = "";
                        });
                        autocompleteList.appendChild(div);
                    });
                });
        });
    </script>
</body>
</html>
